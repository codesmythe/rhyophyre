                              1 ; delay.s -- delays @ 9.216 Mhz, 3 w.s.
                              2 
                              3 	.module	delay
                              4 
                              5 	.area	_CODE
                              6 	.z180
                              7 
                              8 ;
                              9 ;  void wait(uint16 sec100);	/* wait in 1/100 seconds, up to 256 */
                             10 ;
   0000                      11 _wait::			; wait in centiseconds up to 256
   0000 E1            [ 9]   12 	pop	hl	; get return address out of the way
   0001 C1            [ 9]   13 	pop	bc	; get count in BC
   0002 C5            [11]   14 	push	bc	; put back in stack
                             15 
   0003 41            [ 4]   16 	ld	b,c	; use only the B as a counter
   0004 CDr0Ar00      [16]   17 w1:	call	_delay1cs
   0007 10 FB         [ 9]   18 	djnz	w1
   0009 E9            [ 3]   19 	jp	(hl)	; return through a register
                             20 
                             21 
   000A                      22 _delay1cs::		; delay 1/100 second (centisecond)
   000A CDr25r00      [16]   23 	call	_delay1ms	; 1
   000D CDr25r00      [16]   24 	call	_delay1ms	; 2
   0010 CDr25r00      [16]   25 	call	_delay1ms	; 3
   0013 CDr25r00      [16]   26 	call	_delay1ms	; 4
   0016 CDr25r00      [16]   27 	call	_delay1ms	; 5
   0019 CDr25r00      [16]   28 	call	_delay1ms	; 6
   001C CDr25r00      [16]   29 	call	_delay1ms	; 7
   001F CDr25r00      [16]   30 	call	_delay1ms	; 8
   0022 CDr25r00      [16]   31 	call	_delay1ms	; 9
   0025 CDr28r00      [16]   32 _delay1ms::	call	_delay512
   0028 CDr2Br00      [16]   33 _delay512::	call	_delay256
   002B CDr2Er00      [16]   34 _delay256::	call	_delay128
   002E CDr31r00      [16]   35 _delay128::	call	_delay64
   0031 CDr34r00      [16]   36 _delay64::	call	_delay32
   0034 CDr37r00      [16]   37 _delay32::	call	_delay16
   0037 CDr3Ar00      [16]   38 _delay16::	call	_delay8
   003A                      39 _delay8::
   003A 00            [ 3]   40 	nop
   003B 00            [ 3]   41 	nop
   003C 00            [ 3]   42 	nop
   003D 00            [ 3]   43 	nop
   003E                      44 _delay2::		; not accurate at all
   003E C9            [ 9]   45 	ret
                             46 
                             47 
                             48 
                             49 ; call xxx	16 + 5*3	31
                             50 ; ret		 9 + 3*3	18	49
                             51 ; nop		 3 + 1*3	 6	55
                             52 ; nop				 6	61
                             53 ; nop				 6	67
                             54 ; nop				 6	73
                             55 
                             56 ;	delay 4			37 clocks
                             57 ;	delay 5			46 clocks
                             58 ;	delay 6			55 clocks
                             59 ;	delay 7			64.5 clks
                             60 ;	delay 8			74 clocks
                             61 
                             62 
                             63 
